---
title: "PHP, ReflectionClass ã§ã‚¯ãƒ©ã‚¹åã‹ã‚‰ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã™ã‚‹"
emoji: "ğŸ’­"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['php', 'laravel']
published: true
---

## ã‚„ã‚ŠãŸã‹ã£ãŸã“ã¨

Laravel Artisan Promptã§ModelåæŒ‡å®šã—ãŸéš›ã«ãã®ã¾ã¾EloquentModelã‚’åˆ©ç”¨ã—ãŸã‹ã£ãŸ

## new ReflectionClass()

https://www.php.net/manual/ja/class.reflectionclass.php

```php
$model_name = '\\App\\Models\\User';
$refrection = new ReflectionClass($model_name);
$eloquent_model = $refrection->newInstance();

dd($eloquent_model->all());
```

`$model_name` ã«ãƒ¢ãƒ‡ãƒ«åã‚’å…¥ã‚Œã¦ãŠã‘ã°ã€å®šç¾©ã—ãªãã¦ã‚‚EloquentModelãŒæ‰±ãˆã‚‹

## Laravel Promptå¿œç”¨

https://laravel.com/docs/11.x/prompts

```php
// ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆã®å–å¾—
$model_files = collect(scandir(app_path('Models')))->filter(function (string $value, int $key) {
    return $value !== '.' && $value !== '..';
})->values()->toArray();

// Laravel Prompt ã§ãƒ¢ãƒ‡ãƒ«é¸æŠ
$select_model = select(label: 'Modelã‚’é¸æŠ', options: $model_files, hint: '');

// Eloquent Model Instanceä½œæˆ
$refrection = new ReflectionClass($select_model);
$eloquent_model = $refrection->newInstance();

// Modelã®åˆ©ç”¨
dd($eloquent_model);
```

![](https://storage.googleapis.com/zenn-user-upload/656fe8515c30-20240510.png)

ã“ã‚Œã§Propmtã§é¸æŠã—ãŸModelã‚’åˆ©ç”¨å‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚
